<a href="/listings/{{ listing.id }}" class="apple-product-card-link">
    <div class="apple-product-card">
        <!-- Product Image -->
        <div class="apple-product-image">
            {% if listing.first_image_cid %}
            <img src="/api/listings/{{ listing.id }}/images/{{ listing.first_image_cid }}"
                alt="{{ listing.title }}"
                loading="lazy">
            {% else %}
            <div class="apple-product-placeholder">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <path d="M21 15l-5-5L5 21" />
                </svg>
            </div>
            {% endif %}
            <div class="apple-product-badges">
                <span class="apple-badge">{{ listing.category }}</span>
            </div>
        </div>

        <!-- Product Content -->
        <div class="apple-product-content">
            <h3 class="apple-product-title">{{ listing.title }}</h3>
            <p class="apple-product-desc">{{ listing.description | truncate(length=80) }}</p>

            <div class="apple-product-meta">
                <span class="apple-product-vendor">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    {{ listing.vendor }}
                </span>
            </div>
        </div>

        <!-- Product Footer -->
        <div class="apple-product-footer">
            <span class="apple-product-price">{{ listing.price }}</span>
            <button class="apple-btn-icon" data-listing-id="{{ listing.id }}" onclick="event.preventDefault(); addToCart('{{ listing.id }}');">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="9" cy="21" r="1" />
                    <circle cx="20" cy="21" r="1" />
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
                </svg>
            </button>
        </div>
    </div>
</a>
